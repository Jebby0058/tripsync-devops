# 1. ใช้ Node.js เวอร์ชัน 18 แบบเบาพิเศษ (alpine) เป็นพื้นฐานของกล่อง
FROM node:18-alpine

# 2. สร้างโฟลเดอร์ชื่อ /app ไว้ข้างในกล่อง
WORKDIR /app

# 3. ก๊อปปี้แค่ไฟล์บัญชีรายชื่อ (package.json) เข้าไปก่อน
COPY package*.json ./

# 4. สั่งให้กล่องติดตั้งเครื่องมือต่างๆ ตามบัญชีรายชื่อ
RUN npm install

# 5. ก๊อปปี้ไฟล์โค้ดทั้งหมดของเรา (index.js, routes, config) ตามเข้าไป
COPY . .

# 6. เจาะรูให้กล่องที่พอร์ต 3000 เพื่อให้ลูกค้าข้างนอกเรียกใช้งาน API ได้
EXPOSE 3306

# 7. คำสั่งสุดท้ายสำหรับเปิดร้านเมื่อมีคนเอากล่องไปรัน
CMD ["node", "index.js"]